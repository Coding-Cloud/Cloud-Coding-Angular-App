<div class='container'>
  <div class='row'>
    <div class='col-sm-6 col-12'>
      <h1 rtl class='main-heading'>{{(group$ | async)?.name}}</h1>
    </div>
  </div>
  <div class='row align-items-start'>
    <div class='col-md-12 col-lg-6'>
      <div class='row'>
        <div class='col-12'>
          <cc-group-edit [group]='group$ | async' *ngIf='editMode$ | async'></cc-group-edit>
          <mat-card *ngIf='!(editMode$ | async)'>
            <mat-card-content>
              <ul>
                <li><strong>Propriétaire</strong> : {{((group$ | async)?.ownerId | username) | async}}</li>
                <li><strong>Projets associés</strong> : {{(group$ | async)?.projects?.length ?? 0}}</li>
                <li><strong>Créé le</strong> : {{(group$ | async)?.createdAt | date : 'longDate'}}</li>
              </ul>
            </mat-card-content>
            <mat-card-actions align='end' *ngIf='(group$ | async)?.ownerId === (currentUser$ | async)?.id'>
              <button mat-raised-button color='primary' (click)='onEditSwitch()'>
                <mat-icon>edit</mat-icon>
                Modifier
              </button>
              <button mat-raised-button color='warn' (click)='onDelete()'>
                <mat-icon>delete</mat-icon>
                Supprimer
              </button>
            </mat-card-actions>
          </mat-card>
        </div>
        <h3 class='main-heading'>Projets associés</h3>
        <div *ngFor='let project of (group$ | async)?.projects' class='col-6'>
          <mat-card>
            <mat-card-title>
              <a [routerLink]=[projectViewLink,project.id]>{{project.name}}</a>
            </mat-card-title>
            <mat-card-subtitle>
              {{project.language | projectLanguage}}
            </mat-card-subtitle>
            <mat-card-content rel>
              <ul>
                <li><strong>Dernière version</strong> : {{project.lastVersion}}</li>
                <li><strong>Statut</strong> : {{project.status | projectStatus}}</li>
                <li><strong>Visibilité</strong> : {{project.globalVisibility | projectVisibility}}</li>
                <li><strong>Créé le</strong> : {{project.createdAt | date : 'longDate'}}</li>
              </ul>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
    <div class='col-md-12 col-lg-6'>
      <div class='row'>
        <div class='col-12'>
          <h3 class='main-heading'>Membres</h3>
        </div>
        <div class='col-sm-6 col-md-4 col-12' *ngFor='let member of (members$ | async)'>
          <mat-card>
            <mat-card-title>
              <a href='#'>{{member.userId | username | async}}</a>
            </mat-card-title>
            <mat-card-subtitle>
              <strong>Peut modifier</strong> : {{member.canEdit | booleanYesNo}}
            </mat-card-subtitle>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>
