<div [class]='getRootClasse()'>
  <mat-card-header *ngIf='!isInRouteLink()'>
    <mat-card-title>{{usersNavigation.search.name}}</mat-card-title>
  </mat-card-header>
    <div class='row' *ngIf='isInRouteLink()'>
      <h1 class='main-heading'>{{usersNavigation.search.name}}</h1>
    </div>
  <mat-card-content>
    <div class='row gy-2'>
      <mat-form-field class='col-12' appearance='standard'>
        <mat-label>Nom, Email...</mat-label>
        <input matInput
               placeholder='Nom, Email...'
               (keydown.enter)='onSearch()'
               [formControl]='searchQuery'>
      </mat-form-field>
      <mat-progress-bar class='col-12' mode='indeterminate' *ngIf='loading$ | async'></mat-progress-bar>
      <table mat-table [dataSource]='(userResults$ | async) ?? []' class='col-12'>
        <ng-container matColumnDef='row'>
          <td mat-cell *matCellDef='let user'>
            <mat-card class='mt-3'>
              <mat-card-title>{{user.username}}</mat-card-title>
              <mat-card-content>
                <p>{{user.firstname}} {{user.lastname}}</p>
                <p>{{user.email}}</p>
              </mat-card-content>
            </mat-card>
          </td>
        </ng-container>

        <tr mat-row (click)='onClick(user)' *matRowDef='let user; columns: displayedColumns;'></tr>
      </table>
      <mat-paginator
        class='col-12'
        [length]='userTotalResults$ | async'
        [pageSize]='pageSize'
        [pageIndex]='pageIndex'
        [pageSizeOptions]='[5, 10, 20]'
        (page)='onSearchPage($event.pageIndex,$event.pageSize)'
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </mat-card-content>
</div>
