<div class='container'>
  <div class='row'>
    <div class='col-sm-6 col-12'>
      <h1 rtl class='main-heading'>{{projectsLinks.projectList.name}}</h1>
    </div>
    <div class='col-sm-6 col-12 d-flex align-items-sm-start justify-content-sm-end mb-2'>
      <button mat-raised-button color='accent' [routerLink]='[projectsLinks.newProject.path]'>
        <mat-icon>add</mat-icon>
        Nouveau projet
      </button>
    </div>
  </div>
  <h3>Mes projets</h3>
  <div class='row align-items-start'>
    <div *ngFor='let project of getOwnedProjects(projectList$ | async)' class='col-md-6 col-lg-4'>
      <mat-card>
        <div class='d-flex flex-row justify-content-between'>
          <mat-card-title>
            <a [routerLink]=[projectsLinks.viewProject.path,project.id]>{{project.name}}</a>
          </mat-card-title>
        </div>
        <mat-card-subtitle>
          {{project.language | projectLanguage}}
        </mat-card-subtitle>
        <mat-card-content rel>
          <ul>
            <li><strong>Dernière version</strong> : {{project.lastVersion}}</li>
            <li><strong>Statut</strong> : {{project.status | projectStatus}}</li>
            <li><strong>Visibilité</strong> : {{project.globalVisibility | projectVisibility}}</li>
            <li><strong>Créé le</strong> : {{project.createdAt | date : 'longDate'}}</li>
          </ul>
        </mat-card-content>
        <mat-card-actions align='end' *ngIf="project.status !== projectStatus.INITIALISING; else loading">
          <button mat-raised-button color='accent'
                  [routerLink]='"/" + navigation.codeEditor.path + "/project/" + project.uniqueName'>
            <mat-icon>code</mat-icon>
            Go Code !!
          </button>
        </mat-card-actions>
        <ng-template #loading>
          <mat-card-actions align='end'>
            <button mat-raised-button disabled
                    [routerLink]='"/" + navigation.codeEditor.path + "/project/" + project.uniqueName'>
                <span class="d-flex flex-row justify-content-center align-items-center">
                  <span class="me-2">initialisation en cours</span>
                  <app-spinner [diameter]="16"></app-spinner>
                </span>
            </button>
          </mat-card-actions>
        </ng-template>
      </mat-card>
    </div>
  </div>
  <mat-divider></mat-divider>
  <h3>Projets rejoints</h3>
  <div class='row align-items-start'>
    <div *ngFor='let project of getJoinedProjects(projectList$ | async)' class='col-md-6 col-lg-4'>
      <mat-card>
        <div class='d-flex flex-row justify-content-between'>
          <mat-card-title>
            <a [routerLink]=[projectsLinks.viewProject.path,project.id]>{{project.name}}</a>
          </mat-card-title>
        </div>
        <mat-card-subtitle>
          {{project.language | projectLanguage}}
        </mat-card-subtitle>
        <mat-card-content rel>
          <ul>
            <li><strong>Dernière version</strong> : {{project.lastVersion}}</li>
            <li><strong>Statut</strong> : {{project.status | projectStatus}}</li>
            <li><strong>Visibilité</strong> : {{project.globalVisibility | projectVisibility}}</li>
            <li><strong>Créé le</strong> : {{project.createdAt | date : 'longDate'}}</li>
          </ul>
        </mat-card-content>
        <mat-card-actions align='end' *ngIf="project.status !== projectStatus.INITIALISING; else loading">
          <button mat-raised-button color='accent'
                  [routerLink]='"/" + navigation.codeEditor.path + "/project/" + project.uniqueName'>
            <mat-icon>code</mat-icon>
            Go Code !!
          </button>
        </mat-card-actions>
        <ng-template #loading>
          <mat-card-actions align='end'>
            <button mat-raised-button disabled
                    [routerLink]='"/" + navigation.codeEditor.path + "/project/" + project.uniqueName'>
                <span class="d-flex flex-row justify-content-center align-items-center">
                  <span class="me-2">initialisation en cours</span>
                  <app-spinner [diameter]="16"></app-spinner>
                </span>
            </button>
          </mat-card-actions>
        </ng-template>
      </mat-card>
    </div>
  </div>
</div>
